---
title: ã€lite-toolsã€‘ä¸€ä¸ªpythonåŒ…çš„ä½¿ç”¨ç›®å½•
date: 2022-11-17 18:31:35
tags: python
categories: æ•™ç¨‹
toc: true
---

> è¿™ä¸ªåŒ…æ˜¯æˆ‘æçš„ æ–¹ä¾¿æ—¥å¸¸å·¥ä½œä¸­ä¸€äº›é‡å¤ä»£ç æˆ–è€…éœ€è¦ç»•å¼¯çš„ä»£ç å‹ç¼©ç‰ˆæœ¬

<!-- more -->

# å®‰è£…
è¿™é‡Œä¸€èˆ¬æ¥è¯´å›½å†…å›½å¤–é•œåƒéƒ½å¯ä»¥ï¼Œä¸è¿‡æˆ‘è¿™ä¸ªæ›´æ–°å¤ªéšæ„äº†ï¼Œæœ‰äº›æ—¶å€™å›½å†…é•œåƒæ›´æ–°ä¼šæ…¢å‡ å°æ—¶
`pip install lite-tools` å¦‚æœæœ‰å…¶ä»–éœ€æ±‚å¯ä»¥`pip install lite-tools[all]`ä¸è¿‡è¿™ä¸ª`all`ç‰ˆæœ¬æˆ‘æ²¡æœ‰æå®Œï¼Œæ²¡æ—¶é—´ï¼Œå“ˆå“ˆå“ˆ
# å‘½ä»¤è¡Œç‰ˆå—
è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ `lite-tools -h`è·å–ä¸€äº›è¯¦ç»†çš„æ“ä½œ
> å¦‚æœé‡åˆ°pipå®‰è£…äº†ä¹‹å lite-toolsè¿˜æ˜¯å‘½ä»¤è¡Œä¸å¯ä½¿ç”¨ï¼Œé‚£æ˜¯ä½ pythonçš„scriptsç›®å½•ä¸åœ¨ç¯å¢ƒå˜é‡é‡Œé¢,éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸‹,å› ä¸ºä¸æ·»åŠ ä½ çš„`scrapy``feapder`è¿™äº›å·¥å…·ä¹Ÿä¸å¯ä»¥å‘½ä»¤è¡Œä½¿ç”¨ï¼Œå…·ä½“æ“ä½œè‡ªå·±ç™¾åº¦å³å¯ã€‚


![å‘½ä»¤è¡Œå¸®åŠ©](https://static.litetools.top/blogs/lite_tools/1.png)
## ğŸ§® lite-tools fish
è¿™æ˜¯ä¸€ä¸ªäººç”Ÿæ—¥å†ï¼Œæ²¡æœ‰æå†œå†èŠ‚æ—¥é‚£äº›ä¸œè¥¿ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯æ ‡å‡†çš„**ä¸Šäº”ä¼‘äºŒ**åˆ¶åº¦
## ğŸ§® lite-tools say
è¿™é‡ŒåŸºäº [ç†Šä¸è®ºé“å…½éŸ³](http://hi.pcmoe.net/roar.html) ç‰ˆå—ä¿®æ”¹ç®—æ³•æ”¹æˆpythonç‰ˆæœ¬åå®ç°çš„ï¼Œå¹¶åšäº†æ™ºèƒ½è¯†åˆ«ï¼Œå¤§æ¦‚æ“ä½œå¦‚ä¸‹
![å…½è¯­](https://static.litetools.top/blogs/lite_tools/2.png)

æ–°å¢äº† morse --ã€‹ å¯ä»¥é€šè¿‡` lite-tools say -h`  æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•

## ğŸ§® lite-tools acg
è¿™é‡Œæˆ‘æ²¡æœ‰å¼„å¥½ï¼Œä¸»è¦æ˜¯è¿™é‡Œéœ€è¦ä¸€ä¸ªè‡ªåŠ¨æ ¡å‡†æ•°æ®è¿™é‡Œæˆ‘æ²¡æœ‰å¼„ï¼Œåé¢å†å¼„ï¼Œä¸å¤æ‚ï¼Œæƒ³æå‰ä½“éªŒå¯ä»¥ç»ˆç«¯è¾“å…¥è‡ªå·±è¯•ä¸€ä¸‹
## ğŸ§® lite-tools news

1. è¿™é‡Œé»˜è®¤æ˜¯è·å–å›½å†…æ–°é—»
2. `lite-tools news weibo` è¿™æ ·å­å¯ä»¥è·å–æ­¤æ—¶æ­¤åˆ»çš„å¾®åšçƒ­æ¦œæ¦œå•
3. `lite-tools news china/world`åé¢è·Ÿ`china`æˆ–è€…`world`å¯ä»¥è·å–æ­¤æ—¶æ­¤åˆ»ä¸­å›½æˆ–è€…ä¸–ç•Œä¸Šçš„æœ€æ–°çš„æ–°é—»
3. `lite-tools news paper` è¿™ä¸ªå’Œç›´æ¥è¾“å…¥`lite-tools news`æ•ˆæœä¸€æ ·ï¼Œåªä¸è¿‡è¿™ä¸ªæ•°æ®æºæ˜¯**æ¾æ¹ƒæ–°é—»**ï¼Œé»˜è®¤æ˜¯**ç¯çƒç½‘**
## ğŸ§® lite-tools today

1. é»˜è®¤è·å–ä»Šå¤©çš„é»„å†ï¼Œä¹Ÿå¯ä»¥è·å–ä»Šå¹´çš„èŠ‚å‡æ—¥ï¼Œå¹¶çœ‹ç»è¿‡æƒ…å†µ
2. `lite-tools today history`è·å–å†å²ä¸Šçš„ä»Šå¤©çš„ä¿¡æ¯
3. `lite-tools today oil`è·å–ä»Šå¤©çš„æ²¹ä»·

## ğŸ§® lite-tools dict

å…¨ç¨‹é€šè¿‡è¾“å…¥å¯¹åº”çš„æ•°å­—å¯ä»¥æŸ¥æ‰¾æ±‰å­—çš„æ‹¼éŸ³ï¼Œå› ä¸ºæ‹¼éŸ³ä½ ä¼šæ‰“å°±ä¼šæŸ¥ï¼Œä½†æ˜¯ä¸ä¼šæ‰“çš„å°±å¯ä»¥å°è¯•æˆ‘è¿™ä¸ªçœ‹çœ‹ã€‚

## ğŸ§® lite-tools weather
é»˜è®¤æ ¹æ®å½“å‰è¯·æ±‚`IP`è·å–å½“åœ°çš„å¤©æ°”ï¼Œå½“ç„¶æœ‰å¯èƒ½è¯·æ±‚å¤±è´¥ï¼Œç„¶åä¼šé»˜è®¤è¿”å›åŒ—äº¬çš„å¤©æ°”
å¯ä»¥æ‰‹åŠ¨æŒ‡å®š **å¸‚åŒºå¿ **ç„¶åè·å–å¯¹åº”åœ°ç‚¹çš„å¤©æ°”ï¼Œåé¢ä¸ç”¨å†™å¸‚åŒºå¿ï¼Œå¦‚ä¸‹

> lite-tools weather å¤©æ²³     è·å–å¤©æ²³åŒºçš„å¤©æ°”ï¼Œå¦‚æœå…¨å›½æœ‰åŒåçš„åŒºå°±ä¸çŸ¥é“æ˜¯å“ªä¸ªåœ°æ–¹äº†
> lite-tools weather å¹¿å·     è¿™æ ·å­å°±å¯ä»¥è·å–å¹¿å·å¸‚çš„ 

## ğŸ§® lite-tools trans
è¿™é‡Œéœ€è¦å®‰è£…é¢å¤–çš„åŒ… `pip install lite-tools[all]`æ‰å¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ã€‚
**è¿™é‡Œæ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œè¿™é‡Œé¢å¾ˆå¤šåŠŸèƒ½æˆ‘æ²¡æœ‰å®ç°ï¼Œç›®å‰æˆ‘åªæäº†ä¸€ä¸ªå›¾ç‰‡è½¬pdfã€‚**
**å…·ä½“çš„æ“ä½œå¯ä»¥çœ‹ **`**lite-tools trans -h**`
![è½¬æ¢æ“ä½œ](https://static.litetools.top/blogs/lite_tools/4.png)
è¿™é‡Œ`-i`æˆ–è€…`--input`åé¢å¿…é¡»è¦è·Ÿè¾“å…¥è·¯å¾„ï¼Œè¿™åé¢å¯ä»¥è·Ÿæ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥è·Ÿå•ä¸ªå›¾ç‰‡
`-o`æˆ–è€…`--output`åé¢æ˜¯è¾“å…¥æ–‡ä»¶çš„ä½ç½®ï¼Œè¿™é‡Œå¯ä»¥å®šä¹‰è¾“å‡ºæ–‡ä»¶çš„åç§°ï¼Œä¸å†™é»˜è®¤åŒè¾“å…¥æ–‡ä»¶çš„åå­—
ç¤ºä¾‹:
![ç¤ºä¾‹ä»£ç ](https://static.litetools.top/blogs/lite_tools/11.png)
ä¸Šé¢`-i`åé¢è·Ÿäº†è¿™ä¸ªæ–‡ä»¶å¤¹è·¯å¾„  åé¢`-o`åé¢è‡ªå®šä¹‰äº†è¾“å‡ºçš„æ–‡ä»¶åç§° è¿™é‡Œçš„`-o`è¦æ˜¯ä¸å†™åé¢è¾“å‡ºçš„æ–‡ä»¶å°±æ˜¯ å’Œæ–‡ä»¶å¤¹åŒåçš„ä¸€ä¸ª`pdf`

> è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå›¾ç‰‡ä¸€é¡µçº¸ æˆ‘æ²¡æœ‰åšå¯†åº¦æ’ç‰ˆï¼Œé‚£æ ·å­è¦åšå¾ˆå¤šè®¡ç®—ï¼Œå¤ªéº»çƒ¦äº†ï¼Œåæ­£å¹³æ—¶å¤§å¤šæ•°å›¾ç‰‡éƒ½æ˜¯ä¸€é¡µä¸€é¡µçš„

# ä»£ç é‡Œé¢ä½¿ç”¨

## ğŸ“‹ get_lan / get_wan

å› ä¸ºpythonè‡ªå¸¦çš„socketè·å–å†…ç½‘åœ°å€æ²¡æœ‰é‚£ä¹ˆå¥½ç”¨ï¼Œæˆ‘è‡ªå·±é€šè¿‡æ­£åˆ™å†™äº†ä¸€ä¸ª

```python
get_lan()   # è·å–å†…ç½‘ip å›½å†…æœåŠ¡å™¨é—®é¢˜ä¸å¤§ è‹±æ–‡ç‰ˆæœ¬æˆ‘æ²¡æœ‰å…¼å®¹
get_wan()   # è·å–å¤–ç½‘ip ä¾èµ–ç½‘ç»œ
```



## ğŸ“‹ get_b64d / get_b64e

å°±æ˜¯base64åŠ è§£å¯†

```python
get_b64d(string)    # è§£å¯†base64å­—ç¬¦ä¸² å¯ä»¥é€‰æ‹©è§£å¯†æ¨¡å¼ 
get_b64e(string)    # åŠ å¯†å­—ç¬¦ä¸²æˆbase64 å¯ä»¥é€‰æ‹©åŠ å¯†æ¨¡å¼
```



## ğŸ“‹ try_get / try_key / FlattenJson / WrapJson

### ğŸ“‹ try_get

ç”¨`jspath` çš„æ–¹æ³•æå–`jsonä¸²`æˆ–è€…`å­—å…¸` 

```python
a = {"a": {"b": [0, {"c_123":[0, 1, [3, 4, [{"a": 666}]]]}]}}
print(try_get(a, "a.b[1].c_123[2][2][0].a"))

# try_get(æºå¯ä»¥æ˜¯jsonå­—ç¬¦ä¸²å¯ä»¥æ˜¯å­—å…¸, åŒ¹é…è§„åˆ™, æ²¡æœ‰åŒ¹é…ä¸Šçš„æ—¶å€™é»˜è®¤è¿”å›çš„å€¼, expected_type=(int, str))  è¿˜æœ‰å…¶å®ƒå‚æ•°å¯ä»¥ç›´æ¥çœ‹æºä»£ç é‡Œé¢çš„æ³¨é‡Š
# å¯ä»¥è¯»å–æ–‡ä»¶,å¯ä»¥è¯»å–jsonå­—ç¬¦ä¸²,å¯ä»¥æŠŠå­—å…¸è½¬æ¢æˆjsonå­—ç¬¦ä¸²,å¯ä»¥é€šè¿‡`|` å†™å¤šä¸ªè§„åˆ™
```

{% alertbox warning "æ³¨æ„äº‹é¡¹" %}

{% collapse æ­£å¸¸ä½¿ç”¨çš„è¯å°±ä¸ç”¨çœ‹äº† %}

1. æ•°ç»„åœ¨å‰çš„æ—¶å€™ä¸èƒ½ä¸åŠ `.` ä½œä¸ºåˆ†å‰²

   - å¦‚`a.b[1][2].c` ï¼Œ**ä¸èƒ½** å†™æˆ`a.b[1][2]c` 
2. æœ‰å‡ ä¸ªå­—ç¬¦å¦‚æœæ˜¯é”®é‡Œé¢çš„å…ƒç´ çš„è¯ï¼Œéœ€è¦åŠ ä¸Šè½¬ä¹‰ç¬¦å·

   - ç¬¦å·æœ‰ `.` ã€ `[ `ã€  `]`ã€  `|`  è¿™å››ä¸ªæ˜¯é”®çš„è¯è¦è½¬ä¹‰

   - å¦‚`{"a|b": [0, {"c.d[]": 666}]}` è§£æéœ€è¦å†™ `a\|b[1].c\.d\[\]`
3. å¦‚æœè¦æå–çš„é”®æ˜¯**æ•´å‹**æˆ–è€…**æµ®ç‚¹å‹**å°±ä¸è¦ç”¨æˆ‘è¿™ä¸ªæ–¹æ³•äº†
- å¦‚ `{6: {3.14: 666}` è¿™ç§æˆ‘çš„æ–¹æ³•è§£æä¸äº†ï¼Œä¸»è¦æ˜¯æˆ‘æ‡’å¾—å¤„ç†è¿™äº›é€»è¾‘ è¿˜è¦åˆ¤æ–­å†™åœ¨å­—ç¬¦ä¸²é‡Œé¢çš„å†…å®¹æ˜¯å•¥ç±»å‹

{% endcollapse %}



### ğŸ“‹ try_key

è¿™ä¸ªç»“æœæ˜¯åˆ—è¡¨ï¼Œå› ä¸ºå¯ä»¥åŒ¹é…å‡ºæ¥å¤šä¸ªç»“æœï¼Œé€šè¿‡**ä¸€ä¸ªé”®** æ¥åŒ¹é…å¤šä¸ªå€¼ï¼Œæˆ–è€…**ä¸€ä¸ªç¡®å®šçš„å€¼** åŒ¹é…å®ƒçš„é”®

```python
a = {"a": {"b": 123}, "c": {"b": 666}}
print(try_key(a, 'b'))  # è¿™é‡Œæ˜¯åŒ¹é… é”® ä¸º `b` çš„å€¼ [123, 666]
print(try_key(a, 666, mode='value'))  # é€šè¿‡å€¼666æ¥æ‰¾é”®  "b"  
# åŒæ ·è¿™é‡Œå¯ä»¥è®¾ç½®æœŸæœ›è¦çš„ç±»å‹ ä½†æ˜¯åªé€‚åˆé”®å–å€¼
options = {"filter": {"equal": {"key1": "value1", "key2": "value2"}, "unequal": {"key1": "value1"}}}
# ä¸Šé¢å‚æ•°çš„æ„æ€å°±æ˜¯ è®¾ç½®è¿‡æ»¤å™¨ ä½†æ˜¯è¿™ä¸ªè¿‡æ»¤å™¨åªé€‚åˆåŒ¹é… å…„å¼Ÿå…ƒç´ å…³ç³» å¦‚ key1 å’Œ key2 åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸè¿™ç§     
```



### ğŸ“‹ FlattenJson

è¿™é‡Œæ˜¯æ‰å¹³åŒ–json,å°±æ˜¯æŠŠä¸€ä¸ªå¾ˆå¤§çš„`json` å¯ä»¥å˜æˆä¸€å…ƒçš„,ç„¶åä¹Ÿå¯ä»¥é€šè¿‡jspathçš„æ–¹æ³•å–å€¼é‚£äº›

```python
a = {"a": {"b": [666, [777, 888]]}, "c": 123}
app = FlattenJson(a)
app.show()   # è¿™ä¸ªæ²¡æœ‰è¿”å›å€¼,ç›´æ¥æ‰“å°å‡ºæ¥æ‰å¹³åŒ–çš„å†…å®¹ 
# {'a.b[0]': 666, 'a.b[1][0]': 777, 'a.b[1][1]': 888, 'c': 123}
for key, value in app.get_all():  # è¿­ä»£å™¨
    pass   # å¯ä»¥æ‹¿åˆ°æ¯ä¸ªè·¯å¾„ å’Œ å€¼
for key in app.path(value):
    pass   # å¯ä»¥æ‹¿åˆ°æ¯ä¸ªå€¼çš„è·¯å¾„
print(app.get(key, default=None))  # é€šè¿‡è·¯å¾„è·å–å¯¹åº”çš„å€¼ æ²¡æœ‰è¿”å›é»˜è®¤å€¼
print(app.exists(key))  # åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨
```



### ğŸ“‹ JsJson

è¿™ä¸ªæˆ‘æ²¡æœ‰æå®Œ,åæ­£å¤§æ¦‚æ„æ€å°±æ˜¯ä»htmlå•¥çš„æ–‡æœ¬é‡Œæå–jsonå‡ºæ¥,ç›®å‰è¿™é‡Œæ²¡å•¥ç”¨



### ğŸ“‹ WrapJson

æŠ˜å json, æŠŠä¸€ä¸ªå¾ˆå¤§çš„jsonæˆ–è€…å­—å…¸æŒ‰ç…§æƒ³è¦çš„æ ¼å¼è¿›è¡Œå‹ç¼©

```python
a = {"a": "666", "b": {"c": [123], "d": 777}, "e": 3.14}
app = WrapJson({"a": str, "b": {"c": list}, "e": ...})  # è¿™é‡Œä¼ å…¥çš„æ˜¯æ¨¡æ¿,å°±æ˜¯æƒ³è¦è·å¾—çš„ç»“æœæ¨¡æ¿

print(app.get_all(a)) --> {'a': '666', 'b': {'c': [123]}, 'e': 3.14}
```

{% alertbox danger "ä½¿ç”¨æ³¨æ„äº‹é¡¹" %}

{% collapse WrapJsonçš„ä½¿ç”¨æ³¨æ„ç‚¹ open %}

1. `...` åªé€‚ç”¨äº åŸºæœ¬ç±»å‹`str, int, float, bool` çš„æ¨¡ç³ŠåŒ¹é…, æ•°ç»„ç±»å‹çš„`tuple, dict, list, set` ä¸é€‚ç”¨
2. å¦‚æœæ˜¯æ•°ç»„ç±»å‹,å¿…é¡»æŒ‡æ˜,å¦‚ä¸Šé¢`c` çš„æƒ…å†µ
3. å¦‚æœè·å–ç»“æœçš„å€¼å’Œæ¨¡æ¿åŒ¹é…ä¸ä¸Š å°†ä¼šè¿”å›ç©ºæ•°ç»„ç±»å‹ `{} / []` 

{% endcollapse %}



## ğŸ“‹ get_md5 / get_sha / get_sha3

è¿™é‡Œæ²¡å•¥å¥½è¯´çš„ å°±æ˜¯å¦‚å‘½åŠ å¯† éƒ½æœ‰å¯ä»¥æŒ‡å®šç±»å‹çš„å‚æ•°,ç›´æ¥çœ‹æ–¹æ³•å°±çŸ¥é“è½¬å•¥äº†



## ğŸ“‹ get_time / time_count / time_range

### ğŸ“‹ get_time

æ—¶é—´è½¬æ¢, æ–¹æ³•éƒ½å¯ä»¥ç»„åˆä½¿ç”¨

```python
get_time()   # é»˜è®¤è·å–å½“å‰æ—¶é—´æ—¶é—´æˆ³  10ä½
get_time(unit='ms')  # è·å–13ä½çš„æ—¶é—´æˆ³
get_time(instance=float)  # è·å–æµ®ç‚¹ç±»å‹çš„æ—¶é—´æˆ³
get_time(fmt=True)     # è·å– YYYY-mm-dd HH:MM:SS æ ¼å¼çš„æ—¶é—´
get_time(fmt="%Y%m")   # æ‰‹åŠ¨æŒ‡å®šè·å–YYYYmm æ ¼å¼çš„æ—¶é—´
get_time(1656546540, fmt=True)     # å°†æŒ‡å®šæ—¶é—´æˆ³è½¬æ¢ä¸ºé»˜è®¤æ—¶é—´æ ¼å¼
get_time(1656546540000, fmt="%Y%m")   # å°†æŒ‡å®šæ—¶é—´æˆ³è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„æ—¶é—´æ ¼å¼ è¿™é‡Œå¯ä»¥13ä½æˆ–è€…10ä½ å…¼å®¹äº†çš„
get_time("2022-10-11")             # å°†æ—¶é—´æ ¼å¼è½¬æ¢ä¸ºæ—¶é—´æˆ³ é»˜è®¤åŒ¹é…äº† å¹´æœˆæ—¥/.///- å…¶å®ƒæ ¼å¼éœ€è¦è‡ªå·±æ‰‹åŠ¨æŒ‡å®š 
get_time("2022/12/12 10:11", fmt="%Y/%m/%d %H:%M")    # æ²¡æœ‰å†…ç½®çš„æ ¼å¼ éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ ¼å¼ è½¬æ¢ä½æ—¶é—´æˆ³ 
get_time("2022-10-11", unit='ms')   # è½¬æ¢å‡ºæ¥çš„æ—¶é—´æˆ³ä¸º13ä½
```



### ğŸ“‹ time_count 

è·å–å‡½æ•°è¿è¡Œæ—¶é—´çš„è£…é¥°å™¨



### ğŸ“‹ time_range

è·å–èµ·æ­¢æ—¶é—´çš„æ—¶é—´æˆ³èŒƒå›´

```python
# (å¹´,æœˆ,æ—¥,æ—¶,åˆ†,ç§’) å¼€å§‹æ—¶é—´ä¸å¯ä»¥æ¯”ç»“æŸæ—¶é—´å¤§ ä¸å†™çš„ä½ç½®é»˜è®¤ä¸ºå½“å‰å€¼æœ€å°å€¼ å¦‚ (2022, 11) åªå†™äº†å¹´æœˆ,é‚£ä¹ˆæ—¥ æ—¶åˆ†ç§’æ˜¯  1, 00:00:00
time_range((2022,11), (2022,12,6))              # (1667232000, 1670256000)
time_range((2022,11), (2022,12,6), unit='ms')   # (1667232000000, 1670256000000)
```



## ğŸ“‹ try_catch

æ•è·å¼‚å¸¸çš„è£…é¥°å™¨, æ”¯æŒ**åŒæ­¥**å’Œ**å¼‚æ­¥**

```python
@try_catch     # ä¸åŠ å‚æ•°é»˜è®¤æ­£å¸¸æ•è·
# ä¸‹é¢æ˜¯æˆ‘éšä¾¿å†™ä¸€äº›å€¼æ¥ç†è§£,éƒ½å¯ä»¥ä¸å†™éƒ½æœ‰é»˜è®¤å€¼
@try_catch(
    log=False,  # ä¸æ‰“å°æ—¥å¿—                é»˜è®¤æ‰“å°
    retry=5,    # å¦‚æœå¼‚å¸¸äº†å†é‡è¯• æœ€å¤šè¿è¡Œ5æ¬¡ é»˜è®¤1æ¬¡
    default=666,  # æ•è·å®Œäº†è¿˜æ˜¯å¼‚å¸¸ç»™çš„é»˜è®¤å€¼ é»˜è®¤None
    timeout=10,   # å¼‚å¸¸äº†ç­‰10ç§’å†é‡è¯•æˆ–è€…10ç§’åå†æ¨å‡º é»˜è®¤ä¸ç­‰å¾…
    err_callback=send_dingding,  # å¦‚æœæœ€åæŠ¥é”™äº†è§¦å‘è¿™ä¸ªå‡½æ•° é»˜è®¤æ²¡æœ‰ å¦‚æœæœ‰å‚æ•°éœ€è¦åŠ ä¸‹é¢é‚£ä¸ª
    err_args=("xxxå¤±è´¥äº†",)       # è¿™é‡Œåªèƒ½æ˜¯åºåˆ— åˆ—è¡¨ å…ƒç»„éƒ½è¡Œ ä½†æ˜¯å¾—å¯¹åº”ä¸Šé¢å›è°ƒå‡½æ•°çš„å‚æ•°
    except_retry=(TimeoutException, ValueError)  # å¦‚æœæ˜¯ç¢°åˆ°äº†è¿™ä¸¤ç§å¼‚å¸¸ ç›´æ¥å°±ä¸é‡è¯•äº† ç›´æ¥è¿”å›é»˜è®¤å€¼
    ignore_retry=KeyError,    # å’Œä¸Šé¢å‚æ•°ä¸€æ ·å¯ä»¥å•å†™,å¯ä»¥å¤šå†™ ä½†æ˜¯è¿™é‡Œæ˜¯å¦‚æœç¢°åˆ°äº†è¿™ç§å¼‚å¸¸,ç›´æ¥è·³è¿‡ç­‰å¾…ç»§ç»­é‡è¯•
    catch=False,              # é»˜è®¤å°±æ˜¯False è¿™é‡Œæ˜¯æ•è·å¼‚å¸¸çš„åŸå› ,ä¸€èˆ¬ä¸å»ºè®®è®¾ç½®ä¸ºTrueçš„æ—¶å€™ä¸è¦å’Œå…¶å®ƒå†™ä¸€èµ·
)  
```



## ğŸ“‹ get_ua

è·å–user-agent çœŸå®ç‰ˆæœ¬å·

```python
get_ua()                # éšæœºè·å–ä¸€ä¸ª åŸºæœ¬éƒ½æ˜¯chromeçš„
get_ua('pc')            # å¯ä»¥ä»ie edge firfox chrome é‡Œé¢éšæœºå– å¤ªéšæœºäº†
get_ua('mobile')        # éšæœºè·å–ä¸€ä¸ªæ‰‹æœºua
get_ua('chrome', 'ie')  # éšæœºä»chrome/ieé‡Œé¢è·å–ä¸€ä¸ªua
```



## ğŸ“‹ MySql / MySqlConfig / SqlString

æè¿°å¤æ‚ è¿™æ˜¯ç»™æˆ‘è‡ªå·±ä½¿ç”¨æ–¹ä¾¿çš„ å¦‚æœä½ ä»¬è¦ç”¨çš„è¯ æœ€å¥½ç”¨ `MySqlConfig` é…ç½®äº†ä¼ å…¥MySqlåˆ›å»ºä¸€ä¸ªå±äºè‡ªå·±çš„

å¯ä»¥è®¾ç½®è¿”å›å€¼çš„ç±»å‹ åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ æœ‰ä¸€ä¸ª `cursor`å‚æ•° é»˜è®¤`tuple`,å¯ä»¥è®¾ç½®ä¸º`dict` ï¼Œè¿™é‡Œæ˜¯**å­—ç¬¦ä¸²**å“¦.

ä¸‹é¢æ‰€æœ‰çš„`where` éƒ½å¯ä»¥å†™å­—å…¸å’Œå­—ç¬¦ä¸² å­—å…¸åªæœ‰ç­‰å€¼, å­—ç¬¦ä¸²å°±æ˜¯ä½ æƒ³å†™å•¥è§„åˆ™å°±æ˜¯å•¥è§„åˆ™

```python
mysql = MySql(MySqlConfig(database="test", host="xxx", user="aaaaa", password="xxxx", port=6666), table_name="t1")  
# è¿˜æœ‰å…¶å®ƒå‚æ•°è‡ªå·±çœ‹æ¥å£
# å¢
mysql.insert({"a": 123})
# åˆ  
mysql.delete({"a": 666})
# æ”¹
mysql.update({"a": 888}, {"b": 111})
# æŸ¥
for a, b in mysql.select("SELECT a, b FROM xxxx WHERE ..."):  # å¯ä»¥é€‰æ‹©çš„fetchæ¨¡å¼æœ‰ one all many è®¾ç½®manyçš„è¯ å¯ä»¥è®¾ç½®buffer=1000  é»˜è®¤å°±æ˜¯1000
    pass  # a, b å¯¹åº”åé¢sqlè¯­å¥æŸ¥å‡ºçš„ä¸ªæ•° ä¸ç¡®å®šçš„è¯ for xxx in  ä¸€ä¸ªå‚æ•°å°±è¡Œ æ˜¯ä¸ªå…ƒç»„

# å¤§é‡çš„æ•°æ®å»ºè®®ç”¨è¿™ä¸ª
for a, b in mysql.select_iter("SELECT a, b FROM xxxx WHERE ..."):
    pass  # a, b å¯¹åº”åé¢sqlè¯­å¥æŸ¥å‡ºçš„ä¸ªæ•° ä¸ç¡®å®šçš„è¯ for xxx in  ä¸€ä¸ªå‚æ•°å°±è¡Œ æ˜¯ä¸ªå…ƒç»„

# ç»Ÿè®¡
count = mysql.count()  # ä¸å†™ç»Ÿè®¡å…¨éƒ¨ å¯ä»¥å†™è§„åˆ™
e = mysql.exists({"a": 66})  # åˆ¤æ–­a=66æ˜¯å¦å­˜åœ¨ 
```

> æœ€æ–°ç‰ˆæœ¬ å»æ‰äº† insertå’Œupdateçš„batchçš„æ“ä½œï¼Œå…¨éƒ¨ç»Ÿä¸€åˆ°insert/batché‡Œé¢ apiæœ‰æ”¹åŠ¨

```python
# å‡å¦‚è¿”å›å­—å…¸æ ¼å¼çš„
mysql = MySql(
    config=MySqlConfig(
        database="test", 
        host="xxx", 
        user="aaaaa", 
        password="xxxx", 
        # cursor='dict',   # æ–°ç‰ˆè¿™é‡Œå››ç§æ¸¸æ ‡ æœ‰ä¸¤ç§æµå¼æ¸¸æ ‡åªé€‚ç”¨äº æŸ¥è¯¢ é»˜è®¤å·²ç»åŠ åœ¨ select_iter è¿™ä¸ªæ–¹æ³•ä¸Šé¢ å·¨å¿«
        port=6666
    ), 
    table_name="xxxxx",     # è¿™ä¸ªä¼˜å…ˆçº§é«˜äºåœ¨ MySqlConfigé‡Œé¢å†™çš„table_name;æ–¹æ³•é‡Œé¢å†™çš„table_nameä¼˜å…ˆçº§é«˜äºè¿™é‡Œ
) 
# --------------------
# æ³¨æ„ï¼šå®ä¾‹åŒ–ä½ç½®å’Œä¸‹é¢æ–¹æ³•çš„ä½ç½® è‡³å°‘æœ‰ä¸€ä¸ªåœ°æ–¹å†™è¡¨å ä¸¤ä¸ªåœ°æ–¹éƒ½å†™ ä¼˜å…ˆé‡‡å–æ–¹æ³•ä½ç½®çš„è¡¨åæ¥è¿›è¡Œæ“ä½œ
# -------------------

# insert çš„æ–°ç‰ˆapiå¦‚ä¸‹
:param item  : -> dictæ¨¡å¼ ç›´æ¥å¤„ç†ä¸ºå•æ¡ {"a": 1, "b": False} -> a=1,b=0
               -> listæ¨¡å¼ ä¼ å…¥çš„æ˜¯å¤šç»„[{"a": 1, "b": False}, {"a": 1, "b": False}]
:param table_name      : è¡¨å,è¿™é‡Œä¼˜å…ˆçº§é«˜äºå…¨å±€
:param duplicate_except: è¿™é‡Œæ˜¯æ’é™¤æ³•ä¸€èˆ¬è¿™é‡Œå»ºè®®æŠŠä½ ä¸éœ€è¦æ›¿æ¢çš„å­—æ®µåç§°å†™ä¸Šå» Noneçš„è¯å°±ä¸ insert... on duplicate
:param ignore          : ä¸€èˆ¬è¿™é‡Œæ˜¯å¿½ç•¥è¡¨é‡Œå·²ç»å­˜åœ¨çš„æ—¶å€™ è¿™é‡Œä¼˜å…ˆçº§é«˜äºä¸Šé¢ è¿™ä¸ªå’Œä¸Šé¢éƒ½å†™äº†çš„è¯ æ˜¯ç›´æ¥å¿½ç•¥é‡å¤å¼‚å¸¸
:param log             : æ‰“å°æ—¥å¿—

# ç¤ºä¾‹
mysql.insert({"a": 1, "b": False, "c": "xxx"})
mysql.insert([{"a": 1, "b": False, "c": "xxx"}, {"a": 2, "b": True, "c": "yyy"}], duplicate_except=['a'])


# update çš„æ–°ç‰ˆapiå¦‚ä¸‹
:param item : æ›´æ–°çš„ç»“æœ å­—å…¸è¡¨ç¤º
:param where: éœ€è¦æ›´æ–°æ•°æ®çš„æ—¶å€™ä½¿ç”¨çš„æ¡ä»¶
:param table_name: è¡¨å è¿™é‡Œå’Œå…¨å±€äºŒé€‰ä¸€ ä¼˜å…ˆçº§è¿™é‡Œæœ€é«˜
:param log       : æ‰“å°æ—¥å¿—

# ç¤ºä¾‹
mysql.update({"a": 1, "b": 2}, {"c": 5})
mysql.update({"a": 1, "b": 2}, "c IS NULL AND d > 50")
mysql.update({"a": 1, "b": 2}, ["c IS NULL", "d > 50"])   # å¯¹äºå¤šä¸ªæ¡ä»¶çš„ ä¸å±äºç­‰å€¼çš„æœ€å¥½ç”¨è¿™ç§æ–¹æ³•æˆ–è€…å•ç‹¬çš„å­—ç¬¦ä¸²æ–¹æ³•
mysql.update([{"a": 1}, {"a": 2}, {"a": 3}], [{"d": 5}, {"d": 1}, {"d": 10}])   # æ‰¹é‡æ“ä½œåªå¤„ç†ç­‰å€¼ï¼Œå¹¶ä¸”æ¯ä¸ªåŸŸé‡Œé¢çš„å­—æ®µåç§°ä¸€è‡´
```



## ğŸ“‹ match_case

å¯ä»¥è®©ä½ çš„if-else æ›´åŠ å¥½çœ‹

```python
@match_case
def main(x):
    return "é»˜è®¤å€¼"

@main.register(666)
def when_x_666(x):
    return "å½“xä¸º666çš„æ—¶å€™èµ°è¿™é‡Œé€»è¾‘"

@main.register_all(["asd", 444])
def when_x_other(x):
    return "å½“xä¸º ä¸Šé¢åˆ—è¡¨é‡Œé¢ä¸¤ç§æƒ…å†µçš„æ—¶å€™èµ°è¿™é‡Œé€»è¾‘"
```



## ğŸ“‹ CleanString

å¯èƒ½ä¸å¥½ç”¨ å°±æ˜¯æ¸…ç†å­—ç¬¦ä¸²çš„å­—ç¬¦çš„



## ğŸ“‹ clean_html
é‡‡ç”¨äº†ç±³ä¹å¤§ä½¬çš„ `usepy` çš„åŒ…å®ç°çš„
```python
clean_html(htmlæ–‡æœ¬, white_tags=["p"])
```



## ğŸ“‹ color_string

è¿”å›ä¸€ä¸ªæœ‰é¢œè‰²çš„å­—ç¬¦ä¸²

```python
print(color_string("ä½ å¥½", "çº¢"))   # å¯ä»¥å†™ çº¢,çº¢è‰²,red, R  å…¶å®ƒé¢œè‰²åŒç†
print(color_string("å“ˆå“ˆ", {"b": "é»‘", "f": "y", "v": "bold"}))  # å¯¹åº”backgroud front view
```



## ğŸ“‹ x_timeout

{% alertbox primary "TODO" %}

éœ€è¦å…¼å®¹åŒæ­¥å’Œå¼‚æ­¥,æ‰€ä»¥è¿™é‡Œæœ‰é—®é¢˜,è¿™ä¸ªä¹Ÿæ˜¯ä¸å¯ç”¨çš„çŠ¶æ€



## ğŸ“‹ Singleton

å•ä¾‹æ¨¡å¼è£…é¥°å™¨



## ğŸ“‹ Buffer

ä¸€ä¸ªé˜Ÿåˆ—,é…åˆVç¥çš„vthreadä½¿ç”¨æœ‰å¥‡æ•ˆ, å¦‚æœä¸€ä¸ªåœ°æ–¹è®¾ç½®`name` å¯¹åº”çš„å…¶å®ƒçš„éƒ½éœ€è¦è®¾ç½®å¯¹åº”çš„name

```python
import vthread
from lite_tools import Buffer

@vthread.pool(1, gqueue=1)  # ä»»åŠ¡çº¿ç¨‹
@Buffer.task                # å£°æ˜è¿™ä¸ªä»»åŠ¡ å¯ä»¥åŠ åç§°
def task():
    yield 1                 # ä»»åŠ¡å…¨éƒ¨é€šè¿‡yieldæ¨é€åˆ°é˜Ÿåˆ—
    
@vthread.pool(10, gqueue=2)  # æ¶ˆè€—çº¿ç¨‹
@Buffer.worker              # å£°æ˜æ¶ˆè€—ä»»åŠ¡çš„ åç§°éœ€è¦å’Œä»»åŠ¡çš„åç§°å¯¹åº” é»˜è®¤åç§°éƒ½æ˜¯default å¯ä»¥è®¾ç½® @Buffer.worker(name="è®¾ç½®äº†åå­—å…¶å®ƒçš„æ‰€æœ‰åŠŸèƒ½éƒ½éœ€è¦åˆ›å»ºè¿™ä¸ªåå­—æ‰å¯ä»¥å¯¹åº”èµ·æ¥")
def run():
    # è¿™é‡Œä¸éœ€è¦å†™å¾ªç¯ è¿™ä¸ªworkerä¼šè‡ªåŠ¨å¾ªç¯å–é˜Ÿåˆ—
    item = Buffer.seed()   # è¿™é‡Œè¿”å›çš„å†…å®¹æ˜¯å’Œä¸Šé¢çš„yieldå¯¹åº” å¦‚æœyield a, b  é‚£ä¹ˆè¿™é‡Œå»ºè®®  a, b = Buffer.seed() 
    print(item)

if __name__ == "__main__":
    task()
    for _ in range(10): run()
        
# æ­¤å¤–è¿˜æœ‰å¥½å‡ ä¸ªæ–¹æ³•
Buffer.reset()  # é‡ç½®ç»Ÿè®¡çš„æ•°æ®
Buffer.size()   # è·å–å½“å‰é˜Ÿåˆ—é‡Œé¢å‰©ä½™ä»»åŠ¡
Buffer.count()  # è·å–è·‘äº†å¤šå°‘ä¸ªä»»åŠ¡
Buffer.sow(666)  # æ”¾ä¸€ä¸ªæ–°çš„æ•°æ®è¿›é˜Ÿåˆ— << ä¸€èˆ¬ä¸å»ºè®®ç”¨è¿™ä¸ª å¯èƒ½ä¼šé€ æˆé˜Ÿåˆ—é˜»å¡
```



## ğŸ“‹count_lines

ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°

```python
print(count_lines("æ–‡ä»¶è·¯å¾„", encoding='ä¸å†™çš„è¯é»˜è®¤ç³»ç»Ÿå¯¹åº”çš„æ ¼å¼'))
```



## ğŸ“‹LiteLogFile

åˆ›å»ºä¸€ä¸ªæ—¥å¿—è®°å½• é‡‡ç”¨å¾ªç¯è®°å½• åŒä¸€ä¸ªä½ç½®åªä¼šå­˜åœ¨10000æ¡æœ€å¤š è¶…äº†ä»0å¼€å§‹è®°å½• åœ¨ç”¨æˆ·ç›®å½•ä¸‹`.lite_tools/logs/xxx`ä¸‹é¢å¯ä»¥æ‰¾åˆ°è®°å½•

```python
log_file = LiteLogFile('ä¸»ç›®å½•', 'æ—¥å¿—åç§°')
log_file.dump("è¿™é‡Œæ˜¯ä¸€æ¡æ—¥å¿—")
```



## jsç›¸å…³çš„

{% alertbox primary "TODO" %}

ä¸»è¦æ˜¯jsé‡Œé¢ è¿›åˆ¶è½¬æ¢ æ¯”å¦‚36è¿›åˆ¶å•¥çš„ å¤§éƒ¨åˆ†ä»£ç ç”± `å°å°ç™½` æä¾›
```python
# ä¸¤ç§å¼•ç”¨æ–¹å¼
from lite_tools import atob, btoa, to_string_36, xor, unsigned_right_shift, left_shift, dec_to_bin

# æˆ–è€…
from lite_tools.tools.js import atob, btoa, to_string_36, xor, unsigned_right_shift, left_shift, dec_to_bin

# æ˜¯ä¸€æ ·çš„ å°±æ˜¯æ–¹æ³•åŒºåˆ†åŠŸèƒ½ å’Œä¸ç®¡åŒºåˆ†ä¸å¦çš„ å·®åˆ«
```

### ğŸ“‹atob/ btoa  base64åŠŸèƒ½


### ğŸ“‹to_string_2

### ğŸ“‹to_string_16

### ğŸ“‹to_string_36 

```python
# >>>>>>>> ä½†æ˜¯è¿™ä¸ªè¿˜æ²¡æœ‰å®ç°æµ®ç‚¹æ•°çš„è½¬æ¢æ“ä½œ
# js>>> (123456789).toString(36)
to_string_36(5615)   # å°†æ•°å­—è½¬æ¢ä¸º 36 è¿›åˆ¶
```

### ğŸ“‹xor

```python
# js>>> 656616 ^ 516565
# æ•°å­—éƒ½æ˜¯æˆ‘éšä¾¿å†™çš„ è¿™ä¸ªå’Œpythonçš„åŒºåˆ«åœ¨äºç²¾åº¦ä¸åŒ python çš„ ^ æ•°å­—å°çš„æ—¶å€™æ²¡é—®é¢˜ æ•°å­—å¤§å°±ä¸å¯¹äº†
xor(565646, 98486)
```

### ğŸ“‹unsigned_right_shift

```python
# js>>> 555 >>> 1
# ä¸»è¦æ˜¯å®ç°jsçš„ä¸Šé¢æ“ä½œ  æ•°å­—æˆ‘ä¹±å†™çš„
unsigned_right_shift(555, 1)
```

### ğŸ“‹left_shift

```python
# ä¸»è¦æ˜¯è§£å†³å’Œpythonçš„ç²¾åº¦å·®åˆ«é—®é¢˜
# js>>>   555 << 2
left_shift(555, 2)
```

### ğŸ“‹ dec_to_bin 

åŒä¸Šé¢çš„ >>>  to_string_2

```python
# ä¸»è¦æ˜¯è§£å†³ åè¿›åˆ¶ æµ®ç‚¹æ•° è½¬ äºŒè¿›åˆ¶ çš„ç²¾åº¦ é—®é¢˜
# js>>> (56.541).toString(2)
dec_to_bin(56.541)
```

